<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Evaluator Dashboard</title>

    <!-- ✅ Insert this line just below <title> -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      
  <link
    rel="stylesheet"
    href="{{url_for('static', filename="css/evaluator_dashboard.css")}}"
  >
  <link rel="icon" type="image/png" href="{{url_for('static', filename='./images/deped_seal.png')}}"/>
</head>
<body>

 <!-- SITE BANNER -->
<header class="site-banner" role="banner">
  <div class="banner-top">
    <!-- Left group: logo and text -->
    <div class="banner-left-group">
      <img  
        src="{{ url_for('static', filename='images/deped_seal.png') }}"
        alt="DepEd Logo"-*
        class="banner-logo"
      />
      <div class="banner-left-text">
          <p class="sub-banner-dept">Schools Division of Laoag City</p>
        <p class="sub-banner-region">Region I – Ilocos Region</p>
      </div>
        <a href="{{ url_for('evaluator_login') }}" class="banner-logout confirm-logout">Logout</a>
    </div>



    <!-- Centered title -->
    <div class="banner-text">
      <h1>DEPARTMENT OF EDUCATION</h1>
      <p class="banner-subtitle">Human Resource Merit Promotion and Selection Board</p>
    </div>
  </div>
</header>

<!-- Logout Confirmation Modal -->
<div id="logout-modal" class="modal" style="display:none; flex-direction:column;">
  <div class="modal-content">
    <p>Are you sure you want to log out?</p>
    <div class="modal-actions">
      <button id="confirm-logout" class="btn-submit btn-submit--delete">
        Yes, log out
      </button>
      <button id="cancel-logout" class="btn-submit btn-submit--view">
        Cancel
      </button>
    </div>
  </div>
</div>



{% with flashes = get_flashed_messages(
      with_categories=true,
      category_filter=["success", "error"]
   ) %}
  {% if flashes %}
    <div class="flash-msg-container">
      {% for category, text in flashes %}
        <div class="flash-{{ category }}">
          {{ text }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

  <h2>Interview: {{ interview.id }} ({{ interview.type.capitalize() }})</h2>
  <table>
    <thead>
      <tr>
        <th>Applicant Code</th>
        <th>Name</th>
        <th>Your Evaluation Score</th>
        <th>View / Update Evaluation</th>
      </tr>
    </thead>
    <tbody>
      {% for a in applicants %}
      <tr>
        <td>{{ a.code }}</td>
        <td>{{ a.name }}</td>
        <td>
          {% if my_scores[a.code] is not none %}
            {{ my_scores[a.code] }}
          {% else %}
            Not Evaluated
          {% endif %}
        </td>
        <td><a href="{{ url_for('evaluator_applicant_detail', code=a.code) }}" class="btn">View</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>


    <footer class="admin-footer" role="contentinfo">
    <div class="footer-content">
      <div class="footer-logos">
        <img
          src="{{ url_for('static', filename='images/deped_logo.png') }}"
          alt="DepEd Logo"
        />
      </div>
      <div class="footer-links">
        <a href="mailto:laoag.city@deped.gov.ph"
          ><i class="fas fa-envelope"></i>laoag.city@deped.gov.ph</a
        >
        <a
          href="https://www.facebook.com/depedtayolaoagcity"
          target="_blank"
          ><i class="fab fa-facebook-square"></i>facebook.com/depedtayolaoagcity</a
        >
        <a href="https://www.depedlaoagcity.com" target="_blank"
          ><i class="fas fa-globe"></i>depedlaoagcity.com</a
        >
      </div>
    </div>
  </footer>

  <script>
document.addEventListener('DOMContentLoaded', () => {
  const modal        = document.getElementById('logout-modal');
  const btnYes       = document.getElementById('confirm-logout');
  const btnNo        = document.getElementById('cancel-logout');
  let pendingLogout  = null;

  // open modal
  document.querySelectorAll('a.confirm-logout').forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      pendingLogout = link.href;
      document.body.classList.add('modal-open');
      modal.style.display = 'flex';
    });
  });

  // confirm logout
  btnYes.addEventListener('click', () => {
    document.body.classList.remove('modal-open');
    window.location.href = pendingLogout;
  });

  // cancel
  btnNo.addEventListener('click', () => {
    document.body.classList.remove('modal-open');
    modal.style.display = 'none';
    pendingLogout = null;
  });

  // backdrop click or Esc
  modal.addEventListener('click', e => {
    if (e.target === modal) btnNo.click();
  });
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape' && modal.style.display === 'flex') btnNo.click();
  });
});
</script>

</body>
</html>
